<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2020-04-29T03:11:25Z</date>
    <groups>
        <group>
            <name>Templates</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template INSPURM5Server Warn</template>
            <name>Template INSPURM5Server Warn</name>
            <description>get the hardware status of the inspurM5 servers</description>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>cpu</name>
                </application>
                <application>
                    <name>fan</name>
                </application>
                <application>
                    <name>memory</name>
                </application>
                <application>
                    <name>network</name>
                </application>
                <application>
                    <name>pci</name>
                </application>
                <application>
                    <name>power</name>
                </application>
                <application>
                    <name>storage</name>
                </application>
                <application>
                    <name>system</name>
                </application>
                <application>
                    <name>thermal</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>ArrayController Status</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.2.13.1.1.8.0</snmp_oid>
                    <key>ArrayControllerStatus</key>
                    <delay>300s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>storage</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>INSPURHealthStatusMapping</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;2</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last()}&lt;=2</recovery_expression>
                            <name>ArrayController Status Warning</name>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>Server  Power Off</name>
                                    <expression>{Template INSPURM5Server Warn:PowerState.last(0)}=0</expression>
                                    <recovery_expression>{Template INSPURM5Server Warn:PowerState.last(0)}=1</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>CPU Status</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.2.13.1.1.3.0</snmp_oid>
                    <key>CPUStatus</key>
                    <delay>300s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>cpu</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>INSPURHealthStatusMapping</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last(0)}&gt;2</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last(0)}&lt;=2</recovery_expression>
                            <name>CPU Warning</name>
                            <priority>HIGH</priority>
                            <manual_close>YES</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>Server  Power Off</name>
                                    <expression>{Template INSPURM5Server Warn:PowerState.last(0)}=0</expression>
                                    <recovery_expression>{Template INSPURM5Server Warn:PowerState.last(0)}=1</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Disk Status</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.2.13.1.1.5.0</snmp_oid>
                    <key>DiskStatus</key>
                    <delay>300s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>storage</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>INSPURHealthStatusMapping</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;2</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last()}&lt;=2</recovery_expression>
                            <name>Disk Status Warning</name>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>Server  Power Off</name>
                                    <expression>{Template INSPURM5Server Warn:PowerState.last(0)}=0</expression>
                                    <recovery_expression>{Template INSPURM5Server Warn:PowerState.last(0)}=1</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Fan Status</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.2.13.1.1.6.0</snmp_oid>
                    <key>FanStatus</key>
                    <delay>300s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>fan</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last(0)}&gt;2</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last(0)}&lt;=2</recovery_expression>
                            <name>Fan Warning</name>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>Server  Power Off</name>
                                    <expression>{Template INSPURM5Server Warn:PowerState.last(0)}=0</expression>
                                    <recovery_expression>{Template INSPURM5Server Warn:PowerState.last(0)}=1</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Global Status</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.2.13.1.1.10.0</snmp_oid>
                    <key>GlobalStatus</key>
                    <delay>300s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>system</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last(0)}&gt;2</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last(0)}&lt;=2</recovery_expression>
                            <name>GlobalStatus Warning</name>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>Server  Power Off</name>
                                    <expression>{Template INSPURM5Server Warn:PowerState.last(0)}=0</expression>
                                    <recovery_expression>{Template INSPURM5Server Warn:PowerState.last(0)}=1</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Template ICMP Ping: ICMP ping</name>
                    <type>SIMPLE</type>
                    <key>icmpping</key>
                    <delay>60s</delay>
                    <history>30d</history>
                    <trends>30d</trends>
                    <applications>
                        <application>
                            <name>system</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{max(3)}=0</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{max(1)}&gt;0</recovery_expression>
                            <name>{HOST.NAME} ping not reachable</name>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Machine Serial</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.5.1.1.3.15.12.80.114.111.100.117.99.116.32.78.97.109.101</snmp_oid>
                    <key>MachineSerial</key>
                    <delay>18600s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>system</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Machine Serialnumber</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.5.1.1.3.18.21.80.114.111.100.117.99.116.32.83.101.114.105.97.108.32.78.117.109.98.101.114</snmp_oid>
                    <key>MachineSerialnumber</key>
                    <delay>18600s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>system</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Memory Status</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.2.13.1.1.4.0</snmp_oid>
                    <key>MemoryStatus</key>
                    <delay>300s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>memory</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>HPHealthStatusMapping</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last(0)}&gt;2</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last(0)}&lt;=2</recovery_expression>
                            <name>MemoryStatus Warning</name>
                            <priority>HIGH</priority>
                            <manual_close>YES</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>Server  Power Off</name>
                                    <expression>{Template INSPURM5Server Warn:PowerState.last(0)}=0</expression>
                                    <recovery_expression>{Template INSPURM5Server Warn:PowerState.last(0)}=1</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Power State</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.4.1.1.0</snmp_oid>
                    <key>PowerState</key>
                    <delay>300s</delay>
                    <history>30d</history>
                    <trends>30d</trends>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>system</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>INSPURPowerState</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last(0)}=0</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last(0)}=1</recovery_expression>
                            <name>Server  Power Off</name>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Power Status</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.2.13.1.1.7.0</snmp_oid>
                    <key>PowerStatus</key>
                    <delay>300s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>power</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>INSPURHealthStatusMapping</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last(0)}&gt;2</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last(0)}&lt;=2</recovery_expression>
                            <name>PowerStatus Warning</name>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>Server  Power Off</name>
                                    <expression>{Template INSPURM5Server Warn:PowerState.last(0)}=0</expression>
                                    <recovery_expression>{Template INSPURM5Server Warn:PowerState.last(0)}=1</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Temperature Status</name>
                    <type>SNMPV3</type>
                    <snmp_oid>.1.3.6.1.4.1.37945.2.1.2.13.1.1.9.0</snmp_oid>
                    <key>TemperatureStatus</key>
                    <delay>300s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <applications>
                        <application>
                            <name>thermal</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>INSPURHealthStatusMapping</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last(0)}&gt;2</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last(0)}&lt;=2</recovery_expression>
                            <name>TemperatureStatus Warning</name>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>Server  Power Off</name>
                                    <expression>{Template INSPURM5Server Warn:PowerState.last(0)}=0</expression>
                                    <recovery_expression>{Template INSPURM5Server Warn:PowerState.last(0)}=1</recovery_expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Network Enumeration</name>
                    <type>SNMPV3</type>
                    <snmp_oid>discovery[{#SNMPVALUE},.1.3.6.1.4.1.37945.2.1.1.5.1.1.1]</snmp_oid>
                    <key>NetworkEnum</key>
                    <delay>300s</delay>
                    <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                    <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                    <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                    <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                    <port>{$SNMP_PORT}</port>
                    <item_prototypes>
                        <item_prototype>
                            <name>NIC {#SNMPINDEX} : Status</name>
                            <type>SNMPV3</type>
                            <snmp_oid>.1.3.6.1.4.1.37945.2.1.1.5.1.1.6.{#SNMPINDEX}</snmp_oid>
                            <key>NetStatus.[{#SNMPINDEX}]</key>
                            <delay>300s</delay>
                            <history>30d</history>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <snmpv3_securityname>{$SNMP_INSPUR_USER}</snmpv3_securityname>
                            <snmpv3_securitylevel>AUTHPRIV</snmpv3_securitylevel>
                            <snmpv3_authpassphrase>{$SNMP_INSPUR_AUTH}</snmpv3_authpassphrase>
                            <snmpv3_privpassphrase>{$SNMP_INSPUR_PRIV}</snmpv3_privpassphrase>
                            <port>{$SNMP_PORT}</port>
                            <applications>
                                <application>
                                    <name>network</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{regexp(OK,#2)}=0</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{regexp(OK,#2)}=1</recovery_expression>
                                    <name>NIC {#SNMPINDEX} Status Warning</name>
                                    <priority>WARNING</priority>
                                    <manual_close>YES</manual_close>
                                    <dependencies>
                                        <dependency>
                                            <name>Server  Power Off</name>
                                            <expression>{Template INSPURM5Server Warn:PowerState.last(0)}=0</expression>
                                            <recovery_expression>{Template INSPURM5Server Warn:PowerState.last(0)}=1</recovery_expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                </discovery_rule>
            </discovery_rules>
        </template>
    </templates>
    <value_maps>
        <value_map>
            <name>HPHealthStatusMapping</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>other</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>ok</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>degraded</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>failed</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>INSPURHealthStatusMapping</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>na</newvalue>
                </mapping>
                <mapping>
                    <value>1</value>
                    <newvalue>normal</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>warning</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>critical</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>INSPURPowerState</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>off</newvalue>
                </mapping>
                <mapping>
                    <value>1</value>
                    <newvalue>on</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>
</zabbix_export>
